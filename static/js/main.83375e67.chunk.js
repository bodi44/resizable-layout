(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,r){e.exports=r(404)},184:function(e,t){},186:function(e,t){},220:function(e,t){},221:function(e,t){},398:function(e,t,r){},399:function(e,t,r){},400:function(e,t,r){},401:function(e,t,r){},402:function(e,t,r){},403:function(e,t,r){},404:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(161),c=r.n(i),o=r(14),u=function(e){var t=e.children,r=e.store;return a.a.createElement(o.a,{store:r},t)},l=r(9),d=r(163),s=r(15),m=r(10),f=r(5),g=r(90),p=function(e,t){switch(t.type){case"ADD_ARTICLE":return{id:t.id,text:t.text};default:return e}},O={element1:{id:"element1",text:"element 1"},element2:{id:"element2",text:"element 2"},element3:{id:"element3",text:"element 3"},element4:{id:"element4",text:"element 4"},element5:{id:"element5",text:"element 5"},element6:{id:"element6",text:"element 6"}},w=Object(l.combineReducers)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE":return Object(f.a)({},e,Object(m.a)({},t.id,p(e[t.id],t)));case"REMOVE_ARTICLE":var r=Object.assign({},e);return delete r[t.id],r;default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(O),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE":return[].concat(Object(s.a)(e),[t.id]);case"REMOVE_ARTICLE":return e.filter(function(e){return e!==t.id});default:return e}}}),v=r(164),b=r.n(v),I=function(e,t){switch(t.type){case"ADD_TO_LAYOUT":return{id:t.id,row:t.row,col:t.col,size:t.size};case"ADD_TO_EXISTING_ROW":return Object(f.a)({},e,{row:t.rowId});case"CHANGE_COL":return Object(f.a)({},e,{col:t.col});case"UPDATE_SIZE":return Object(f.a)({},e,{size:t.size});default:return e}},A=Object(l.combineReducers)({byIdsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_LAYOUT":return Object(f.a)({},e,Object(m.a)({},t.id,I(e[t.id],t)));case"REMOVE_FROM_LAYOUT":var r=Object.assign({},e);return delete r[t.id],r;case"ADD_TO_EXISTING_ROW":case"CHANGE_COL":case"UPDATE_SIZE":return Object.assign({},e,Object(m.a)({},t.id,I(e[t.id],t)));default:return e}},allIdsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_LAYOUT":return[].concat(Object(s.a)(e),[t.id]);case"REMOVE_FROM_LAYOUT":return e.filter(function(e){return e!==t.id});default:return e}},rowsById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_LAYOUT":return Object(f.a)({},e,Object(m.a)({},t.row,{rowId:t.row,articlesInRow:[].concat(Object(s.a)(e[t.row].articlesInRow),[t.id])}));case"ADD_NEW_ROW":return Object(f.a)({},e,Object(m.a)({},t.id,{rowId:t.id,articlesInRow:[]}));case"DELETE_ROW":var r=Object.assign({},e);return delete r[t.id],r;case"ADD_TO_EXISTING_ROW":return Object(f.a)({},e,Object(m.a)({},t.rowId,Object(f.a)({},e[t.rowId],{articlesInRow:[].concat(Object(s.a)(e[t.rowId].articlesInRow),[t.id])})));case"MOVE_ARTICLE":return Object(f.a)({},e,Object(m.a)({},t.rowId,Object(f.a)({},e[t.rowId],{articlesInRow:b()(e[t.rowId].articlesInRow,{$splice:[[t.index,1],[t.overIndex,0,t.draggedId]]})})));default:return e}},rowsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NEW_ROW":return[].concat(Object(s.a)(e),[t.id]);case"DELETE_ROW":return e.filter(function(e){return e!==t.id});default:return e}}}),E=Object(l.combineReducers)({articles:w,layoutArticles:A}),y=function(e){return function(e){return e.allIds.map(function(t){return e.byId[t]})}(e.articles)},D=function(e){return function(e){return e.allIdsInLayout}(e.layoutArticles)},h=function(e){return function(e){return e.allIdsInLayout.map(function(t){return e.byIdsInLayout[t]})}(e.layoutArticles)},_=function(e){return function(e){return e.rowsInLayout.map(function(t){return e.rowsById[t]})}(e.layoutArticles)},j=r(165),T=r(12),L=r(166),R=r.n(L),x=r(29),M=r.n(x),N=(r(398),Object(T.DragSource)("Article",{beginDrag:function(e){return e.article},endDrag:function(e,t){t.getDropResult()}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}})(function(e){var t=e.article;return(0,e.connectDragSource)(a.a.createElement("div",{className:"Article"},a.a.createElement("h3",{className:"Article__title"},t.text)))})),S=(r(399),M()(Object(o.b)(function(e){return{articles:y(e).filter(function(t){return-1===D(e).indexOf(t.id)})}},{addArticle:function(e){return{type:"ADD_ARTICLE",id:Object(g.v4)(),text:e}},removeArticle:function(e){return{type:"REMOVE_ARTICLE",id:e}}}),Object(T.DropTarget)("Article",{drop:function(e,t){console.log(e)}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),item:t.getItem()}}))(function(e){e.data;var t=e.connectDropTarget,r=(e.hovered,e.articles),n=e.addArticle,i=e.removeArticle;return t(a.a.createElement("aside",{className:"Sidebar"},a.a.createElement("h1",{className:"Sidebar__title"},"Sidebar"),r.map(function(e){return a.a.createElement(N,{key:e.id,article:e,addArticle:n,removeArticle:i})})))})),z=r(167),C=r(168),W=r(170),U=r(169),k=r(171),P=(r(87),r(400),"__"),X="_";var V=function(e){return function(t){var r,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t?r=t:a=t||{},n=Array.isArray(a)?a:Object.keys(a).filter(function(e){return a[e]})||[],function(e){var t=e.b,r=e.e,n=e.m,a=r?[t,r].join(P):t;return[a].concat(Object(s.a)(n.map(function(e){return[a,e].join(X)}))).join(" ").trim()}({b:e,e:r,m:n})}}("LayoutArticle"),Y=function(e){function t(){var e,r;Object(z.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(W.a)(this,(e=Object(U.a)(t)).call.apply(e,[this].concat(a)))).state={dragging:!1,initX:null,initMaxWidth:parseInt(r.props.parameters.size.replace("px","")),changed:!1},r.handleMouseDown=function(e){e.preventDefault(),r.state.dragging||r.setState(function(e){return Object(f.a)({},e,{dragging:!0,changed:!0})}),window.addEventListener("mouseup",r.handleMouseUp),window.addEventListener("mousemove",r.handleMouseMove)},r.handleMouseUp=function(){r.state.dragging&&r.setState(function(e){return Object(f.a)({},e,{initX:null,dragging:!1})}),window.removeEventListener("mousemove",r.handleMouseMove),window.removeEventListener("mouseup",r.handleMouseUp)},r.handleMouseMove=function(e){var t=r.props,n=t.parameters,a=t.updateSize;if(e.preventDefault(),r.state.initX){var i=e.pageX-r.state.initX,c="".concat(r.state.initMaxWidth+i,"px");a({id:n.id,size:c})}else r.setState(function(t){return Object(f.a)({},t,{initX:e.pageX,initialMaxWidth:parseInt(n.size.replace("px",""))})})},r}return Object(k.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this,t=this.state.changed,r=this.props,n=r.parameters,i=r.layoutArticle,c=r.connectDropTarget,o=r.connectDragSource,u=r.resize;return c(o(a.a.createElement("div",{className:"grid__cell_".concat(n.col," ").concat(V()),style:t?{minWidth:n.size,maxWidth:n.size}:{}},a.a.createElement("h3",{className:V("title")},i.text),u?a.a.createElement("div",{className:V("resize"),onMouseDown:function(t){return e.handleMouseDown(t)}}):null)))}}]),t}(n.Component),G=M()(Object(T.DragSource)("Article",{beginDrag:function(e){return{id:e.layoutArticle.id,text:e.layoutArticle.text,index:e.index,row:e.parameters.row}}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}),Object(T.DropTarget)("Article",{canDrop:function(){return!1},hover:function(e,t){var r=t.getItem().row,n=t.getItem().id,a=t.getItem().index,i=e.parameters.row,c=e.layoutArticle.id,o=e.index;a!==o&&n!==c&&r===i&&(void 0!==a&&void 0!==o&&e.moveArticle(e.rowId,a,o,n,c),t.getItem().index=o)}},function(e){return{connectDropTarget:e.dropTarget()}}),Object(o.b)(null,{updateSize:function(e){return{type:"UPDATE_SIZE",id:e.id,size:e.size}},moveArticle:function(e,t,r,n,a){return{type:"MOVE_ARTICLE",rowId:e,index:t,overIndex:r,draggedId:n,overId:a}}}))(Y),B=M()(Object(T.DropTarget)("Article",{drop:function(e,t){return 0===e.layoutArticles.filter(function(e){return e.id===t.getItem().id}).length&&(0!==e.parameters.length?(e.parameters.map(function(t){return e.changeCol({id:t.id,col:"".concat(12/(e.parameters.length+1))})}),e.addToLayout({id:t.getItem().id,col:"".concat(12/(e.parameters.length+1)),row:e.row,size:"500px"})):e.addToLayout({id:t.getItem().id,col:"12",row:e.row,size:"500px"})),{id:t.getItem().id}}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),item:t.getItem()}}),Object(o.b)(function(e){return{layoutArticles:y(e).filter(function(t){return-1!==D(e).indexOf(t.id)})}},{addToLayout:function(e){return{type:"ADD_TO_LAYOUT",id:e.id,col:e.col,row:e.row,size:e.size}},removeFromLayout:function(e){return{type:"REMOVE_FROM_LAYOUT",id:e}},changeCol:function(e){return{type:"CHANGE_COL",id:e.id,col:e.col}}}))(function(e){var t=e.row,r=e.articles,n=e.parameters;return(0,e.connectDropTarget)(a.a.createElement("section",{className:"grid",style:{border:"1px solid grey",marginBottom:"5px"}},r.map(function(e,i){return r[r.length-1]===e?a.a.createElement(G,{key:e.id,index:i,rowId:t,layoutArticle:e,parameters:n.filter(function(t){return t.id===e.id})[0],resize:!1}):a.a.createElement(G,{key:e.id,index:i,rowId:t,layoutArticle:e,parameters:n.filter(function(t){return t.id===e.id})[0],resize:!0})})))}),F=(r(401),Object(o.b)(function(e){return{layoutArticles:y(e),layoutParameters:h(e),rows:_(e)}},{addNewRow:function(){return{type:"ADD_NEW_ROW",id:Object(g.v4)()}}})(function(e){e.data;var t=e.layoutArticles,r=e.layoutParameters,n=e.addNewRow,i=e.rows;return a.a.createElement("main",{className:"Layout"},a.a.createElement("h1",{className:"Layout__title"},"Layout"),a.a.createElement("main",null,i.map(function(e){return a.a.createElement(B,{key:e.rowId,row:e.rowId,parameters:r.filter(function(t){return t.row===e.rowId}),articles:e.articlesInRow.map(function(e){return t.filter(function(t){return t.id===e})[0]})})})),a.a.createElement("button",{className:"Layout__add-row",onClick:function(){return n()}},"Add row"))})),H=(r(402),function(){return a.a.createElement("div",{className:"App"},a.a.createElement(T.DragDropContextProvider,{backend:R.a},a.a.createElement(S,null),a.a.createElement(F,null)))});r(403);c.a.render(a.a.createElement(u,{store:Object(l.createStore)(E,Object(d.composeWithDevTools)(Object(l.applyMiddleware)(j.a)))},a.a.createElement(H,null)),document.getElementById("root"))},87:function(e,t,r){}},[[172,1,2]]]);
//# sourceMappingURL=main.83375e67.chunk.js.map