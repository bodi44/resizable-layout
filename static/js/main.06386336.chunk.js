(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,r){e.exports=r(404)},184:function(e,t){},186:function(e,t){},220:function(e,t){},221:function(e,t){},398:function(e,t,r){},399:function(e,t,r){},400:function(e,t,r){},401:function(e,t,r){},402:function(e,t,r){},403:function(e,t,r){},404:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),a=r(161),c=r.n(a),o=r(14),u=function(e){var t=e.children,r=e.store;return i.a.createElement(o.a,{store:r},t)},l=r(9),d=r(163),s=r(15),m=r(11),f=r(5),g=r(90),O=function(e){return{type:"ADD_ARTICLE_TO_LAYOUT",id:e.id,col:e.col,row:e.row,size:e.size}},I=function(e,t){switch(t.type){case"ADD_ARTICLE":return{id:t.id,text:t.text};default:return e}},A={element1:{id:"element1",text:"element 1"},element2:{id:"element2",text:"element 2"},element3:{id:"element3",text:"element 3"},element4:{id:"element4",text:"element 4"},element5:{id:"element5",text:"element 5"},element6:{id:"element6",text:"element 6"}},p=Object(l.combineReducers)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE":return Object(f.a)({},e,Object(m.a)({},t.id,I(e[t.id],t)));case"REMOVE_ARTICLE":var r=Object.assign({},e);return delete r[t.id],r;default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(A),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE":return[].concat(Object(s.a)(e),[t.id]);case"REMOVE_ARTICLE":return e.filter(function(e){return e!==t.id});default:return e}}}),_=r(164),w=r.n(_),E=function(e,t){switch(t.type){case"ADD_ARTICLE_TO_LAYOUT":return{id:t.id,row:t.row,col:t.col,size:t.size};case"ADD_ARTICLE_TO_EXISTING_ROW":return Object(f.a)({},e,{row:t.rowId});case"CHANGE_ARTICLE_COLUMN_IN_ROW":return Object(f.a)({},e,{col:t.col});case"UPDATE_ARTICLE_SIZE_IN_LAYOUT":return Object(f.a)({},e,{size:t.size});default:return e}},T=Object(l.combineReducers)({byIdsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE_TO_LAYOUT":return Object(f.a)({},e,Object(m.a)({},t.id,E(e[t.id],t)));case"REMOVE_ARTICLE_FROM_LAYOUT":var r=Object.assign({},e);return delete r[t.id],r;case"ADD_ARTICLE_TO_EXISTING_ROW":case"CHANGE_ARTICLE_COLUMN_IN_ROW":case"UPDATE_ARTICLE_SIZE_IN_LAYOUT":return Object.assign({},e,Object(m.a)({},t.id,E(e[t.id],t)));default:return e}},allIdsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE_TO_LAYOUT":return[].concat(Object(s.a)(e),[t.id]);case"REMOVE_ARTICLE_FROM_LAYOUT":return e.filter(function(e){return e!==t.id});default:return e}},rowsById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE_TO_LAYOUT":return Object(f.a)({},e,Object(m.a)({},t.row,{rowId:t.row,articlesInRow:[].concat(Object(s.a)(e[t.row].articlesInRow),[t.id])}));case"ADD_NEW_ROW_TO_LAYOUT":return Object(f.a)({},e,Object(m.a)({},t.id,{rowId:t.id,articlesInRow:[]}));case"DELETE_ROW_FROM_LAYOUT":var r=Object.assign({},e);return delete r[t.id],r;case"ADD_ARTICLE_TO_EXISTING_ROW":return Object(f.a)({},e,Object(m.a)({},t.rowId,Object(f.a)({},e[t.rowId],{articlesInRow:[].concat(Object(s.a)(e[t.rowId].articlesInRow),[t.id])})));case"REORDER_ARTICLE_IN_ROW":return Object(f.a)({},e,Object(m.a)({},t.rowId,Object(f.a)({},e[t.rowId],{articlesInRow:w()(e[t.rowId].articlesInRow,{$splice:[[t.index,1],[t.overIndex,0,t.draggedId]]})})));default:return e}},rowsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NEW_ROW_TO_LAYOUT":return[].concat(Object(s.a)(e),[t.id]);case"DELETE_ROW_FROM_LAYOUT":return e.filter(function(e){return e!==t.id});default:return e}}}),v=Object(l.combineReducers)({articles:p,layoutArticles:T}),b=function(e){return function(e){return e.allIds.map(function(t){return e.byId[t]})}(e.articles)},y=function(e){return function(e){return e.allIdsInLayout}(e.layoutArticles)},R=function(e){return function(e){return e.allIdsInLayout.map(function(t){return e.byIdsInLayout[t]})}(e.layoutArticles)},D=function(e){return function(e){return e.rowsInLayout.map(function(t){return e.rowsById[t]})}(e.layoutArticles)},L=r(165),h=r(10),j=r(166),x=r.n(j),C=r(18),N=r.n(C),M=(r(398),Object(h.DragSource)("Article",{beginDrag:function(e){return e.article},endDrag:function(e,t){t.getDropResult()}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}})(function(e){var t=e.article;return(0,e.connectDragSource)(i.a.createElement("div",{className:"Article"},i.a.createElement("h3",{className:"Article__title"},t.text)))})),U=(r(399),N()(Object(o.b)(function(e){return{articles:b(e).filter(function(t){return-1===y(e).indexOf(t.id)})}},{addArticle:function(e){return{type:"ADD_ARTICLE",id:Object(g.v4)(),text:e}},removeArticle:function(e){return{type:"REMOVE_ARTICLE",id:e}}}),Object(h.DropTarget)("Article",{drop:function(e,t){console.log(e)}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),item:t.getItem()}}))(function(e){e.data;var t=e.connectDropTarget,r=(e.hovered,e.articles),n=e.addArticle,a=e.removeArticle;return t(i.a.createElement("aside",{className:"Sidebar"},i.a.createElement("h1",{className:"Sidebar__title"},"Sidebar"),r.map(function(e){return i.a.createElement(M,{key:e.id,article:e,addArticle:n,removeArticle:a})})))})),S=r(167),z=r(168),W=r(170),Y=r(169),P=r(171),k=(r(87),r(400),"__"),X="_";var F=function(e){return function(t){var r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t?r=t:i=t||{},n=Array.isArray(i)?i:Object.keys(i).filter(function(e){return i[e]})||[],function(e){var t=e.b,r=e.e,n=e.m,i=r?[t,r].join(k):t;return[i].concat(Object(s.a)(n.map(function(e){return[i,e].join(X)}))).join(" ").trim()}({b:e,e:r,m:n})}},G=F("LayoutArticle"),V=function(e){function t(){var e,r;Object(S.a)(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(r=Object(W.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(i)))).state={dragging:!1,initX:null,initMaxWidth:parseInt(r.props.parameters.size.replace("px","")),changed:!1},r.handleMouseDown=function(e){e.preventDefault(),r.state.dragging||r.setState(function(e){return Object(f.a)({},e,{dragging:!0,changed:!0})}),window.addEventListener("mouseup",r.handleMouseUp),window.addEventListener("mousemove",r.handleMouseMove)},r.handleMouseUp=function(){r.state.dragging&&r.setState(function(e){return Object(f.a)({},e,{initX:null,dragging:!1})}),window.removeEventListener("mousemove",r.handleMouseMove),window.removeEventListener("mouseup",r.handleMouseUp)},r.handleMouseMove=function(e){var t=r.props,n=t.parameters,i=t.updateArticleSizeInLayout;if(e.preventDefault(),r.state.initX){var a=e.pageX-r.state.initX,c="".concat(r.state.initMaxWidth+a,"px");i({id:n.id,size:c})}else r.setState(function(t){return Object(f.a)({},t,{initX:e.pageX,initialMaxWidth:parseInt(n.size.replace("px",""))})})},r}return Object(P.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this,t=this.state.changed,r=this.props,n=r.parameters,a=r.layoutArticle,c=r.connectDropTarget,o=r.connectDragSource,u=r.resize;return c(o(i.a.createElement("div",{className:"grid__cell_".concat(n.col," ").concat(G()),style:t?{minWidth:n.size,maxWidth:n.size}:{}},i.a.createElement("h3",{className:G("title")},a.text),u?i.a.createElement("div",{className:G("resize"),onMouseDown:function(t){return e.handleMouseDown(t)}}):null)))}}]),t}(n.Component),B=N()(Object(h.DragSource)("Article",{beginDrag:function(e){return{id:e.layoutArticle.id,text:e.layoutArticle.text,index:e.index,row:e.parameters.row}}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}),Object(h.DropTarget)("Article",{canDrop:function(){return!1},hover:function(e,t){var r=t.getItem().row,n=t.getItem().id,i=t.getItem().index,a=e.parameters.row,c=e.layoutArticle.id,o=e.index;i!==o&&n!==c&&r===a&&(void 0!==i&&void 0!==o&&e.reorderArticleInRow(e.rowId,i,o,n,c),t.getItem().index=o)}},function(e){return{connectDropTarget:e.dropTarget()}}),Object(o.b)(null,{updateArticleSizeInLayout:function(e){return{type:"UPDATE_ARTICLE_SIZE_IN_LAYOUT",id:e.id,size:e.size}},reorderArticleInRow:function(e,t,r,n,i){return{type:"REORDER_ARTICLE_IN_ROW",rowId:e,index:t,overIndex:r,draggedId:n,overId:i}}}))(V),H=N()(Object(h.DropTarget)("Article",{drop:function(e,t){return 0===e.layoutArticles.filter(function(e){return e.id===t.getItem().id}).length&&(0!==e.parameters.length?(e.parameters.map(function(t){return e.changeArticleColumnInRow({id:t.id,col:"".concat(12/(e.parameters.length+1))})}),e.addArticleToLayout({id:t.getItem().id,col:"".concat(12/(e.parameters.length+1)),row:e.row,size:"500px"})):e.addArticleToLayout({id:t.getItem().id,col:"12",row:e.row,size:"500px"})),{id:t.getItem().id}}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),item:t.getItem()}}),Object(o.b)(function(e){return{layoutArticles:b(e).filter(function(t){return-1!==y(e).indexOf(t.id)})}},{addArticleToLayout:O,removeArticleFromLayout:function(e){return{type:"REMOVE_ARTICLE_FROM_LAYOUT",id:e}},changeArticleColumnInRow:function(e){return{type:"CHANGE_ARTICLE_COLUMN_IN_ROW",id:e.id,col:e.col}}}))(function(e){var t=e.row,r=e.articles,n=e.parameters;return(0,e.connectDropTarget)(i.a.createElement("section",{className:"grid",style:{border:"1px solid grey",marginBottom:"5px"}},r.map(function(e,a){return r[r.length-1]===e?i.a.createElement(B,{key:e.id,index:a,rowId:t,layoutArticle:e,parameters:n.filter(function(t){return t.id===e.id})[0],resize:!1}):i.a.createElement(B,{key:e.id,index:a,rowId:t,layoutArticle:e,parameters:n.filter(function(t){return t.id===e.id})[0],resize:!0})})))}),Z=(r(401),F("Layout")),J=N()(Object(h.DropTarget)("Article",{drop:function(e,t){0===e.layoutParameters.filter(function(e){return e.id===t.getItem().id}).length&&e.addArticleToLayout({id:t.getItem().id,col:"12",row:e.addNewRowToLayout().id,size:"500px"})}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),item:t.getItem()}}),Object(o.b)(function(e){return{articles:b(e),layoutParameters:R(e),rows:D(e)}},{addArticleToLayout:O,addNewRowToLayout:function(){return{type:"ADD_NEW_ROW_TO_LAYOUT",id:Object(g.v4)()}}}))(function(e){var t=e.connectDropTarget,r=(e.data,e.articles),n=e.layoutParameters,a=(e.addNewRowToLayout,e.rows);return t(i.a.createElement("main",{className:Z()},i.a.createElement("h1",{className:Z("title")},"Layout"),i.a.createElement("main",null,a.map(function(e){return i.a.createElement(H,{key:e.rowId,row:e.rowId,parameters:n.filter(function(t){return t.row===e.rowId}),articles:e.articlesInRow.map(function(e){return r.filter(function(t){return t.id===e})[0]})})}))))}),$=(r(402),function(){return i.a.createElement("div",{className:"App"},i.a.createElement(h.DragDropContextProvider,{backend:x.a},i.a.createElement(U,null),i.a.createElement(J,null)))});r(403);c.a.render(i.a.createElement(u,{store:Object(l.createStore)(v,Object(d.composeWithDevTools)(Object(l.applyMiddleware)(L.a)))},i.a.createElement($,null)),document.getElementById("root"))},87:function(e,t,r){}},[[172,1,2]]]);
//# sourceMappingURL=main.06386336.chunk.js.map